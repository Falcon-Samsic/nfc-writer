<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>NFC Writer</title>
</head>
<body>
  <h2>NFC-Write: </h2>
  <p id="display">Preparing…</p>
  <button id="writeBtn">Tap to Write Tag</button>

  <script>
    // 1️⃣ Grab the “val” parameter from the URL
    const params = new URLSearchParams(location.search);
    const val   = params.get('val') || '';
    document.getElementById('display').textContent = `Value → ${val}`;

    // 2️⃣ On button-click, ask Web NFC to write it
    document.getElementById('writeBtn').onclick = async () => {
      try {
        await navigator.nfc.write({
          records: [{ recordType: 'text', data: val }]
        });
        alert('✅ Written: ' + val);
      } catch (e) {
        alert('❌ NFC write failed:\n' + e);
      }
    };
  </script>
</body>
</html>
